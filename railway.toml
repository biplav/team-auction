# Railway.app configuration
#
# DEPLOYMENT OPTIONS:
#
# Option 1: Standalone Socket.io Server (Recommended for Vercel + Railway setup)
#   - Uses: socket-server.js (no database, lightweight)
#   - Use Nixpacks builder (current config)
#   - Start command: node socket-server.js
#
# Option 2: Full Next.js App with Socket.io
#   - Uses: Dockerfile (includes database, Next.js, Socket.io)
#   - Change builder to: builder = "DOCKERFILE"
#   - Dockerfile: Use main Dockerfile
#   - Requires: DATABASE_URL, NEXTAUTH_SECRET, NEXTAUTH_URL env vars
#
# Option 3: Socket Server with Docker
#   - Uses: Dockerfile.socket (lightweight, Docker-based)
#   - Change builder to: builder = "DOCKERFILE"
#   - Add: dockerfilePath = "Dockerfile.socket"

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "node server.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Required environment variables - Set these in Railway dashboard:
# - DATABASE_URL: Your CockroachDB connection string
# - NEXTAUTH_SECRET: Generate with: openssl rand -base64 32
# - NEXTAUTH_URL: Your Railway app URL (e.g., https://your-app.up.railway.app)
# - PORT: Will be auto-set by Railway (default: 3000)
